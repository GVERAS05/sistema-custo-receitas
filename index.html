<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Sistema de Custos de Receitas</title>

  <script src="ingredientes.js"></script>
  <script src="app.js" defer></script>

  <style>
    body { font-family: Arial; margin: 20px; }
    input { margin: 4px; padding: 4px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #999; padding: 6px; text-align: center; }
    th { background: #eee; }
    ul { list-style: none; padding: 0; max-height: 200px; overflow-y: auto; border: 1px solid #ccc; }
    li { padding: 6px; cursor: pointer; }
    li:hover { background: #f0f0f0; }
  </style>
</head>

<body>

<h1>Sistema de Custeio de Receitas</h1>

<input
  type="text"
  id="busca"
  placeholder="üîç Pesquisar ingrediente..."
  onkeyup="filtrar()"
>

<ul id="lista"></ul>

<h2>Ingredientes da Receita</h2>

<table>
  <thead>
    <tr>
      <th>Ingrediente</th>
      <th>Qtd usada</th>
      <th>Unidade</th>
      <th>Qtd embalagem</th>
      <th>Pre√ßo embalagem (R$)</th>
      <th>Custo (R$)</th>
    </tr>
  </thead>
  <tbody id="receita"></tbody>
</table>

<p><strong>Custo total:</strong> R$ <span id="custoTotal">0.00</span></p>

<h2>Margem e Pre√ßo de Venda</h2>

<label>
  Margem de contribui√ß√£o (%):
  <input type="number" onchange="atualizarMargem(this.value)">
</label>

<p><strong>Pre√ßo de venda sugerido:</strong> R$ <span id="precoVenda">0.00</span></p>

<script>
function filtrar() {
  let texto = document.getElementById("busca").value.toLowerCase();
  let lista = document.getElementById("lista");
  lista.innerHTML = "";

  ingredientes
    .filter(i => i.nome.toLowerCase().includes(texto))
    .forEach(i => {
      let li = document.createElement("li");
      li.innerText = i.nome + " (" + i.unidade + ")";
      li.onclick = () => adicionarIngrediente(i);
      lista.appendChild(li);
    });
}
</script>

</body>
</html>
