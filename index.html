<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Sistema de Custeio</title>

  <script src="ingredientes.js"></script>
  <script src="app.js" defer></script>

  <style>
    body { font-family: Arial; margin: 20px; }
    input { padding: 5px; width: 120px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #aaa; padding: 6px; text-align: center; }
    th { background: #eee; }
    ul { list-style: none; padding: 0; max-height: 200px; overflow-y: auto; border: 1px solid #ccc; }
    li { padding: 6px; cursor: pointer; }
    li:hover { background: #f0f0f0; }
  </style>
</head>

<body>

<h1>Sistema de Custeio de Receitas</h1>

<input
  type="text"
  placeholder="üîç Buscar ingrediente"
  onkeyup="filtrar(this.value)"
>

<ul id="lista"></ul>

<h2>Itens da Receita</h2>

<table>
  <thead>
    <tr>
      <th>Item</th>
      <th>Quantidade usada</th>
      <th>Custo unit√°rio</th>
      <th>Custo (R$)</th>
    </tr>
  </thead>
  <tbody id="receita"></tbody>
</table>

<p><strong>Custo total:</strong> R$ <span id="custoTotal">0.00</span></p>

<h3>Margem</h3>
<input type="number" placeholder="Margem %" onchange="atualizarMargem(this.value)">

<p><strong>Pre√ßo de venda:</strong> R$ <span id="precoVenda">0.00</span></p>

<script>
function filtrar(texto) {
  let lista = document.getElementById("lista");
  lista.innerHTML = "";

  ingredientes
    .filter(i => i.nome.toLowerCase().includes(texto.toLowerCase()))
    .forEach(i => {
      let li = document.createElement("li");
      li.innerText = `${i.nome} (${i.tipo})`;
      li.onclick = () => adicionarIngrediente(i);
      lista.appendChild(li);
    });
}
</script>

</body>
</html>
