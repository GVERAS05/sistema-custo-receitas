<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Sistema de Custeio de Receitas</title>

  <!-- Base de ingredientes -->
  <script src="ingredientes.js"></script>

  <!-- L√≥gica do sistema -->
  <script src="app.js" defer></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    h1, h2 {
      margin-top: 20px;
    }

    input, select {
      padding: 5px;
      margin: 2px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #999;
      padding: 6px;
      text-align: center;
    }

    th {
      background-color: #eee;
    }

    ul {
      list-style: none;
      padding: 0;
      max-height: 220px;
      overflow-y: auto;
      border: 1px solid #ccc;
      margin-top: 5px;
    }

    li {
      padding: 6px;
      cursor: pointer;
    }

    li:hover {
      background-color: #f0f0f0;
    }
  </style>
</head>

<body>

  <h1>Sistema de Custeio de Receitas</h1>

  <!-- BUSCA -->
  <label><strong>Buscar item:</strong></label><br>
  <input
    type="text"
    placeholder="üîç Digite o nome do item"
    onkeyup="filtrar(this.value)"
  >

  <ul id="lista"></ul>

  <!-- TABELA -->
  <h2>Itens da Receita</h2>

  <table>
    <thead>
      <tr>
        <th>Item</th>
        <th>Quantidade usada</th>
        <th>Tipo de compra</th>
        <th>Pre√ßo de compra (R$)</th>
        <th>Custo (R$)</th>
      </tr>
    </thead>
    <tbody id="receita"></tbody>
  </table>

  <!-- TOTAIS -->
  <p>
    <strong>Custo total da receita:</strong>
    R$ <span id="custoTotal">0.00</span>
  </p>

  <!-- MARGEM -->
  <h2>Margem de contribui√ß√£o</h2>

  <input
    type="number"
    placeholder="Digite a margem (%)"
    onchange="atualizarMargem(this.value)"
  >

  <p>
    <strong>Pre√ßo de venda sugerido:</strong>
    R$ <span id="precoVenda">0.00</span>
  </p>

  <!-- SCRIPT DE FILTRO -->
  <script>
    function filtrar(texto) {
      let lista = document.getElementById("lista");
      lista.innerHTML = "";

      if (!texto) return;

      ingredientes
        .filter(item =>
          item.nome.toLowerCase().includes(texto.toLowerCase())
        )
        .forEach(item => {
          let li = document.createElement("li");
          li.textContent = item.nome + " (" + item.tipo + ")";
          li.onclick = () => adicionarIngrediente(item);
          lista.appendChild(li);
        });
    }
  </script>

</body>
</html>
