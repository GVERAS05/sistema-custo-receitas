<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Calculadora de Custos Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
/* ===== Corpo ===== */
body {
  margin: 0;
  padding: 0;
  font-family: 'Roboto', sans-serif;
  background: #FAF9F6;
  color: #212121;
}

/* ===== Container ===== */
.container {
  max-width: 1300px;
  margin: 0 auto;
  padding: 25px 20px;
}

/* ===== Cabeçalho e abas ===== */
header {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  margin-bottom: 25px;
}

header h1 {
  font-size: 42px;
  color: #1E88E5;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

.tabs {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.tab {
  padding: 10px 20px;
  background: #FCFCFC;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.3s;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.tab.active {
  background: #1E88E5;
  color: white;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
}

/* ===== Seções ===== */
.section {
  display: none;
}
.section.active {
  display: block;
}

/* ===== Search ===== */
.search-container {
  position: relative;
  width: 300px;
  margin-bottom: 15px;
}

.search-container input {
  width: 100%;
  padding: 12px 45px 12px 18px;
  border-radius: 25px;
  border: 2px solid #E0E0E0;
  font-size: 16px;
  transition: all 0.3s;
  background: #FCFCFC;
}

.search-container input:focus {
  border-color: #1E88E5;
  box-shadow: 0 0 15px rgba(30,136,229,0.2);
  outline: none;
}

.search-container img {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  opacity: 0.7;
}

/* ===== Dropdown lista ===== */
#listaItens {
  border: 2px solid #E0E0E0;
  border-radius: 25px;
  max-height: 220px;
  overflow-y: auto;
  background: #FCFCFC;
  padding: 0;
  margin: 0 0 30px 0;
}

#listaItens li {
  list-style: none;
  padding: 12px 20px;
  cursor: pointer;
  border-bottom: 1px solid #BDBDBD;
  transition: background 0.2s, color 0.2s;
}

#listaItens li:hover {
  background: #1E88E5;
  color: white;
  font-weight: 600;
}

/* ===== Grid de cards ===== */
.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
}

/* ===== Card individual ===== */
.card-item {
  background: #FCFCFC;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  padding: 20px;
  display: flex;
  flex-direction: column;
  opacity: 0;
  transform: translateY(-20px);
  animation: fadeIn 0.4s forwards;
  transition: all 0.3s ease;
}

.card-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(0,0,0,0.12);
}

.card-item .card-header {
  font-weight: 600;
  font-size: 18px;
  margin-bottom: 12px;
  color: #333;
}

.card-item .input-group {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  margin-bottom: 10px;
}

.card-item input[type=number], .card-item select {
  padding: 10px;
  border-radius: 12px;
  border: 2px solid #E0E0E0;
  background: #FAF9F6;
  font-size: 16px;
  width: 100px;
  transition: all 0.3s;
  text-align: center;
}

.card-item input[type=number]:focus, .card-item select:focus {
  border-color: #1E88E5;
  box-shadow: 0 0 12px rgba(30,136,229,0.25);
  outline: none;
}

.card-item .custo {
  font-weight: 600;
  font-size: 16px;
  color: #333;
  min-width: 90px;
  text-align: right;
}

.card-item button {
  background: #E53935;
  color: white;
  border: none;
  border-radius: 15px;
  padding: 10px 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.card-item button:hover {
  background: #C62828;
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

/* ===== Total ===== */
.total {
  text-align: right;
  font-size: 28px;
  font-weight: 700;
  color: #1E88E5;
  margin-top: 40px;
  background: #FCFCFC;
  padding: 14px 20px;
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.08);
}

/* ===== Tabela de preços e receitas ===== */
.table-container {
  overflow-x: auto;
  background: #FCFCFC;
  padding: 20px;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.table-container table {
  width: 100%;
  border-collapse: collapse;
}

.table-container th, .table-container td {
  padding: 12px 10px;
  text-align: left;
  border-bottom: 1px solid #BDBDBD;
}

.table-container th {
  background: #1E88E5;
  color: white;
  font-weight: 600;
}

.table-container input[type=number] {
  width: 100px;
}

/* ===== Animações ===== */
@keyframes fadeIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== Responsivo ===== */
@media(max-width: 750px){
  .cards-grid {
    grid-template-columns: 1fr;
  }
  header {
    flex-direction: column;
    align-items: stretch;
    gap: 20px;
  }
  header .search-container {
    width: 100%;
  }
}
</style>
</head>
<body>
<div class="container">
<header>
<h1>Calculadora de Custos Premium</h1>
<div class="tabs">
  <div class="tab active" onclick="abrirAba('calculadora')">Calculadora</div>
  <div class="tab" onclick="abrirAba('precos')">Preços Unitários</div>
  <div class="tab" onclick="abrirAba('receitas')">Receitas Salvas</div>
</div>
</header>

<!-- Seção Calculadora -->
<div class="section active" id="calculadora">
  <div class="search-container">
    <input type="text" id="busca" placeholder="Pesquisar ingrediente..." onkeyup="filtrarLista()">
    <img src="https://img.icons8.com/ios-glyphs/30/000000/search--v1.png" alt="lupa">
  </div>
  <ul id="listaItens"></ul>
  <div class="cards-grid" id="cardsContainer"></div>
  <p class="total">Custo total: R$ <span id="total">0.00</span></p>
</div>

<!-- Seção Preços Unitários -->
<div class="section" id="precos">
  <div class="table-container">
    <table id="tabelaPrecos">
      <thead>
        <tr>
          <th>Ingrediente</th>
          <th>Preço Unitário</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<!-- Seção Receitas Salvas -->
<div class="section" id="receitas">
  <div class="table-container">
    <input type="text" id="nomeReceita" placeholder="Nome da receita" style="margin-bottom:10px; padding:10px; width:100%; border-radius:12px; border:2px solid #E0E0E0;">
    <button onclick="salvarReceita()" style="background:#43A047; color:white; border:none; border-radius:12px; padding:10px 20px; cursor:pointer; margin-bottom:15px;">Salvar Receita</button>
    <table id="tabelaReceitas">
      <thead>
        <tr>
          <th>Nome da Receita</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>
</div>
<script>
// ===== Ingredientes e Unidades =====
const ingredientes = [
"Ácido Cítrico","Açúcar Refinado","Açúcar Sc.","Ajinomoto","Alho Natural","Amido de milho",
"Aroma de Baunilha","Aroma de Cebola","Aroma de Chocolate","Aroma de Leite Condensado","Aroma de Coco",
"Aroma de Três Leite","Aroma de Maisena","Aroma de Manteiga","Aroma de Maria","Aroma de Milho",
"Aroma Alho","Caramelo","Aroma de Queijo Parmesão","Bicarbonato de Amônio","Bicarbonato de Sódio",
"Cacau em pó","Cebola Natural Roxa","Caixa de Papelão","Emb. Saco Fd. 50x80","Chocolate em Pó",
"Embalagem Transp. Lisa","Embalagem folhada Cebola","Embalagem folhada Alho","Embalagem Folhada Manteiga",
"Milho Inatura","Farelo","Fubá de milho","Embalagem Milho","Ezimas","Embalagem 8 Grãos",
"Embalagem Água e Sal","Embalagem Integral","Emb. Rainha Maisena","Emb. Rainha Leite","Emb. Rainha Cracker",
"Emb. Rainha Rosca Leite","Emb. Rainha Rosca Chocolate","Emb. Rainha Rosca Coco","Emb. Rainha Manteiga",
"Emb. Rainha Alho","Emb. Rainha Cebola","Farinha de Trigo Fama Panificação","Farinha de Trigo Panete Comum",
"Farinha de Trigo Evita 2","Fécula de Mandioca","Fermento Instantâneo","Gordura Agropalma","Lecetina de Soja",
"Manteiga Itacolomir","Margarina Folhada Rica","Margarina puro sabor","Margarina","Mel Caseiro",
"Metabisulfito","Óleo de Soja","Milho Gelatinizado","Gordura Líquida Vegetal","Paulialfa","Paulitase",
"Paulivita","Pirofosfato","Sal Micronizado","Sal Refinado","Soro de Leite","Unimelo","Etiquetas Conchita",
"Embalagem de Caixa p/ Folhada","Óleo Pronto Cebola","Filme Rezinite","Fita Sela Caixa","Gelatina de Milho",
"Embalagem Flocão","Embalagem Dallato Leite","Embalagem Dallato Coco","Embalagem Dallato Chocolate",
"Aroma de Limão","Farofa","B. de Amônio","Farinha de Trigo Sc","Sal","Margarina M. Ouro","Amido de Milho",
"Gordura Hid.","Tempero Cebola","Tempero Mant.","Tempero Alho","Esponja","Fermento","Paulivita",
"Açúcar"
].sort();

const unidades = [
  { label: "Unidade", value: "un" },
  { label: "Quilo (kg)", value: "kg" },
  { label: "Grama (g)", value: "g" },
  { label: "Litro (L)", value: "L" },
  { label: "Mililitro (ml)", value: "ml" }
];

// ===== Abas =====
function abrirAba(aba) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelector(`.tab[onclick="abrirAba('${aba}')"]`).classList.add('active');
  document.getElementById(aba).classList.add('active');
}

// ===== LocalStorage para preços =====
let precosUnitarios = JSON.parse(localStorage.getItem('precosUnitarios')) || {};
let receitas = JSON.parse(localStorage.getItem('receitas')) || [];

// ===== Preencher tabela de preços =====
function preencherTabelaPrecos() {
  const tbody = document.querySelector("#tabelaPrecos tbody");
  tbody.innerHTML = '';
  ingredientes.forEach(ing => {
    const tr = document.createElement('tr');
    const preco = precosUnitarios[ing] || 0;
    tr.innerHTML = `<td>${ing}</td>
                    <td><input type="number" min="0" step="0.01" value="${preco}" onchange="alterarPreco('${ing}', this.value)"></td>`;
    tbody.appendChild(tr);
  });
}
function alterarPreco(nome, valor) {
  precosUnitarios[nome] = parseFloat(valor);
  localStorage.setItem('precosUnitarios', JSON.stringify(precosUnitarios));
  atualizarTotal();
}

// ===== Receitas =====
function salvarReceita() {
  const nome = document.getElementById('nomeReceita').value.trim();
  if(!nome) { alert("Digite um nome para a receita"); return; }
  const receita = [];
  document.querySelectorAll('#cardsContainer .card-item').forEach(card=>{
    const nomeItem = card.dataset.nome;
    const qtd = parseFloat(card.querySelector('.qtd').value) || 0;
    const unidade = card.querySelector('.unidade').value;
    receita.push({nome:nomeItem, qtd, unidade, custoUnit:precosUnitarios[nomeItem] || 0});
  });
  receitas.push({nome, itens:receita});
  localStorage.setItem('receitas', JSON.stringify(receitas));
  document.getElementById('nomeReceita').value = '';
  atualizarTabelaReceitas();
  alert("Receita salva com sucesso!");
}

function atualizarTabelaReceitas() {
  const tbody = document.querySelector("#tabelaReceitas tbody");
  tbody.innerHTML = '';
  receitas.forEach((r,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${r.nome}</td>
                    <td>
                      <button onclick="abrirReceita(${i})">Abrir</button>
                      <button onclick="excluirReceita(${i})" style="background:#E53935;">Excluir</button>
                    </td>`;
    tbody.appendChild(tr);
  });
}

function abrirReceita(index) {
  const r = receitas[index];
  document.getElementById('cardsContainer').innerHTML = '';
  let itensAdicionados = {};
  r.itens.forEach(item=>{
    adicionarItem(item.nome,item.qtd,item.custoUnit,item.unidade,itensAdicionados);
  });
  abrirAba('calculadora');
}

function excluirReceita(index) {
  if(!confirm("Deseja realmente excluir essa receita?")) return;
  receitas.splice(index,1);
  localStorage.setItem('receitas', JSON.stringify(receitas));
  atualizarTabelaReceitas();
}

// ===== Calculadora =====
const listaUL = document.getElementById("listaItens");
const cardsContainer = document.getElementById("cardsContainer");
let itensAdicionados = {};

function mostrarLista(itens){
  listaUL.innerHTML = "";
  itens.forEach(item=>{
    if(itensAdicionados[item]) return;
    const li = document.createElement("li");
    li.textContent = item;
    li.onclick = ()=>adicionarItem(item);
    listaUL.appendChild(li);
  });
}

mostrarLista(ingredientes);

function filtrarLista(){
  const txt = document.getElementById("busca").value.toLowerCase();
  mostrarLista(ingredientes.filter(i=>i.toLowerCase().includes(txt)));
}

function adicionarItem(nome, qtd=0, precoUnit=0, unidade="un", added=null){
  if(added && added[nome]) return;
  itensAdicionados[nome]=true;
  if(added) added[nome]=true;

  const card = document.createElement("div");
  card.className="card-item";
  card.dataset.nome=nome;

  const precoAtual = precosUnitarios[nome] || precoUnit;

  card.innerHTML=`
    <div class="card-header">${nome}</div>
    <div class="input-group">
      <input class="qtd" type="number" min="0" step="0.01" value="${qtd}" onchange="atualizarTotal()">
      <select class="unidade">
        ${unidades.map(u=>`<option value="${u.value}" ${u.value===unidade?'selected':''}>${u.label}</option>`).join('')}
      </select>
      <input type="number" class="precoUnit" min="0" step="0.01" value="${precoAtual}" onchange="alterarPreco('${nome}', this.value); atualizarTotal();">
      <span class="custo">R$ ${(qtd*precoAtual).toFixed(2)}</span>
      <button onclick="removerItem('${nome}')">Remover</button>
    </div>
  `;

  cardsContainer.appendChild(card);
  atualizarTotal();
}

function removerItem(nome){
  delete itensAdicionados[nome];
  const card = document.querySelector(`.card-item[data-nome="${nome}"]`);
  if(card) card.remove();
  atualizarTotal();
}

function atualizarTotal(){
  let total=0;
  document.querySelectorAll('#cardsContainer .card-item').forEach(card=>{
    const qtd = parseFloat(card.querySelector('.qtd').value) || 0;
    const preco = parseFloat(card.querySelector('.precoUnit').value) || 0;
    card.querySelector('.custo').textContent = `R$ ${(qtd*preco).toFixed(2)}`;
    total += qtd*preco;
  });
  document.getElementById('total').textContent = total.toFixed(2);
}

// ===== Inicialização =====
preencherTabelaPrecos();
atualizarTabelaReceitas();
</script>
</body>
</html>
